#!/usr/bin/env ruby

require "pry"
require 'configparser'

require "bundler/setup"
require "harvest"

configfile = File.expand_path('~/.config/start-harvest.conf')
config = ConfigParser.new(configfile).map { |k, v| [k, convert_to_sym(v)] }.to_h
harvest = Harvest::Client.new(**config['harvest'])

puts "Active user is #{harvest.active_user.first_name} #{harvest.active_user.last_name}"

if harvest.active_user.is_admin
  puts "User is Admin"
else
  puts "User is not an Admin"
end  

# project_assignments = harvest.project_assignments
binding.pry

harvest.projects.select {|project| project if project.name == "Intellaegis - Managed"}
